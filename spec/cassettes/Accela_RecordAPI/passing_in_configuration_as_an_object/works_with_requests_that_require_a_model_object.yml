---
http_interactions:
- request:
    method: post
    uri: https://apis.accela.com/oauth2/token
    body:
      encoding: UTF-8
      string: agency_name=nullisland&client_id=638853549908464776&client_secret=4588a663f51143e69432e2734143e44b&environment=TEST&grant_type=password&password=accela&scope=records&username=developer
    headers:
      X-Accela-Appid:
      - '638853549908464776'
      Content-Type:
      - application/x-www-form-urlencoded
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 12 Jun 2025 22:43:34 GMT
      Content-Type:
      - application/json; charset=utf-8
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Set-Cookie:
      - TiPMix=19.274723659943195; path=/; HttpOnly; Domain=construct-prod-auth.azurewebsites.net:443;
        Max-Age=3600; Secure
      Vary:
      - Accept-Encoding
      X-Accela-Traceid:
      - 250612224334014-8076fe7a
      X-Azure-Ref:
      - 20250612T224333Z-156d548487bg6h9khC1BOSmfrg000000020g000000003a4k
      X-Cache:
      - CONFIG_NOCACHE
    body:
      encoding: ASCII-8BIT
      string: "{\r\n  \"access_token\": \"AisMLrUTDT8JtWeaaoLzZbLWmMUDYkF9cD86t_IYzaQmxSJ3cobf3r1GmvhT24nZ6OzPsLFVLZgPw5won1b4ac1Auk6VGiJcpYkEJ-IyvNdqTszuISBHsmKkIzr9hQZ_kNSV5cDDQZFEN1LZAFouAgCRQ_GK0FkTyi5OSx-07owgp4FoTM7agCfGvVmMFOOuDOOMjL4AW_Sj6YmJnknt4x8bu_nKyBmfQpoJjerMsHN8hqkuWZ5Pa2_0jjrV4-44lIrxBrJggHA9-KDbnv4Tz7p0Mb99nbNJKGE4ooED_C0ZmR31ToOFYSYO6-apbZtowSiY3WmSfgTbaWMIPODRJJt99uW0VpittVTf2k6XrHkzsWU-yEkt6o0XZSgKhDi5InIEaedGO3SKH6WD71iPm3fbrMtfOnB9FSpdxOINwBsatKRRXzIVXrHBegKTVNXvH1EMrAwBUEsylWfpdIVbBGxIC3vM4mA0MzO8VVvbfAlqaQHsctRa_F2te3l7pLuSwM5HdM0xeOAmmSt8N7ZsMEBGuGBomfe6Uu1J-2OWBt-ebgElBBzrExPnED4govkYcyQUQP_5A-gHTaWXeV0t624Xp-2NM6aQULAe5Exexg01\",\r\n
        \ \"token_type\": \"bearer\",\r\n  \"expires_in\": 900,\r\n  \"refresh_token\":
        \"VZpkBZmjyJq7gpqMIX5JH9Lv0zqeyzByvNrQuqZXFDtxhMaDkgMzRA3BEd669rGlxCQ8EDowH1TW2bSh5InW8eDZiqgF9ALxyTCv2932avZ3oOxoO5b-oMmC7fWeh7QeRmHIZRS213VtYh3HYQomA0gzxzxPxh6_4eFXh6IikXFGqSs17ITNkFu8m8d6k0uZI1oU3x4n6QCkRhISnmXIgBky7BlcsZX5QqCnJ5gE64Cy3SQllkid51Ar_dRgz3kUx-8kAV_qf_FdWe7zsW5h8SWZdDsBGx9HH51Pj7tQw03MdIsiAtbrTKr76UUczGEoua0qAW0_gf9w4_YAL4V9ASoadGrNXLt0ZODLb6DKmqU1-wsutyLR02RwR3QIA4oktw3DW_k8gN7fkrrO0HkIbPUOp-NKDoNCy_0mPQOWr3UUyovEyris4ldzgG-nR5bbJVgBczj2dde74QFfCMfKhTtPYcDaM6RlAhzPcqA0AFbrev-ZgWFfOsJKuXPw1Dyi99fLynKBd8wXLo8tBs7WcRGCsjF3ppDpI8eAz1gLAZPg8oxwaV-WhCDf6jjbpIeBPabCmRNNSu2lJG3DM3RibRAmSF8Ce0bj-FRT0yyMm-Y1\",\r\n
        \ \"scope\": \"records\"\r\n}"
  recorded_at: Thu, 12 Jun 2025 22:43:34 GMT
- request:
    method: post
    uri: https://apis.accela.com/v4/records
    body:
      encoding: UTF-8
      string: '{"addresses":[],"parcels":[],"owners":[],"contacts":[{"type":{"text":"Applicant","value":"Applicant"}}],"type":{"id":"Building-Commercial-Addition-NA"}}'
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      X-Accela-Appid:
      - '638853549908464776'
      Authorization:
      - AisMLrUTDT8JtWeaaoLzZbLWmMUDYkF9cD86t_IYzaQmxSJ3cobf3r1GmvhT24nZ6OzPsLFVLZgPw5won1b4ac1Auk6VGiJcpYkEJ-IyvNdqTszuISBHsmKkIzr9hQZ_kNSV5cDDQZFEN1LZAFouAgCRQ_GK0FkTyi5OSx-07owgp4FoTM7agCfGvVmMFOOuDOOMjL4AW_Sj6YmJnknt4x8bu_nKyBmfQpoJjerMsHN8hqkuWZ5Pa2_0jjrV4-44lIrxBrJggHA9-KDbnv4Tz7p0Mb99nbNJKGE4ooED_C0ZmR31ToOFYSYO6-apbZtowSiY3WmSfgTbaWMIPODRJJt99uW0VpittVTf2k6XrHkzsWU-yEkt6o0XZSgKhDi5InIEaedGO3SKH6WD71iPm3fbrMtfOnB9FSpdxOINwBsatKRRXzIVXrHBegKTVNXvH1EMrAwBUEsylWfpdIVbBGxIC3vM4mA0MzO8VVvbfAlqaQHsctRa_F2te3l7pLuSwM5HdM0xeOAmmSt8N7ZsMEBGuGBomfe6Uu1J-2OWBt-ebgElBBzrExPnED4govkYcyQUQP_5A-gHTaWXeV0t624Xp-2NM6aQULAe5Exexg01
      X-Accela-Agency:
      - nullisland
      User-Agent:
      - Faraday v2.13.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 12 Jun 2025 22:43:36 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Vary:
      - Accept-Encoding
      X-Powered-By:
      - Undertow/1
      X-Accela-Traceid:
      - 250612224334659-af0c1dcd
      X-Azure-Ref:
      - 20250612T224334Z-156d548487b6w2zkhC1BOSqneg00000002fg000000000w90
      X-Cache:
      - CONFIG_NOCACHE
    body:
      encoding: ASCII-8BIT
      string: '{"message":"EMSE Script Framework Versions<BR>EVENT TRIGGERED: ApplicationSubmitAfter<BR>SCRIPT
        EXECUTED: APPLICATIONSUBMITAFTERV3.0<BR>INCLUDE VERSION: 3.1.28<BR>SCRIPT
        VERSION : 3<BR>GLOBAL VERSION : 3<BR>**WARNING: getting project parents:  Project
        Parents Not Found: record ID: NULLISLAND-REC25-00000<BR>**WARNING: Could not
        find parent license Cap for child CAP(REC25-00000-00057): <BR><B>EMSE Script
        Results for BLD25-00136</B><BR>capId = class com.accela.aa.aamain.cap.CapIDModel<BR>cap
        = class com.accela.aa.emse.dom.CapScriptModel<BR>currentUserID = DEVELOPER<BR>currentUserGroup
        = BuildingAgencyAdmin<BR>systemUserObj = class com.accela.aa.aamain.people.SysUserModel<BR>appTypeString
        = Building/Commercial/Addition/NA<BR>capName = null<BR>capStatus = Submitted<BR>fileDate
        = 6/12/2025<BR>fileDateYYYYMMDD = 2025-06-12<BR>sysDate = class com.accela.aa.emse.util.ScriptDateTime<BR>parcelArea
        = 0<BR>estValue = 0<BR>calcValue = 0<BR>feeFactor = CONT<BR>houseCount = 0<BR>feesInvoicedTotal
        = 40<BR>balanceDue = 40<BR>lookup(EMSE_VARIABLE_BRANCH_PREFIX,ApplicationSubmitAfter)
        = ASA<BR>Executing : PreExecuteForAfterEvents, Elapsed Time: 0.129 Seconds<BR>Finished:
        PreExecuteForAfterEvents, Elapsed Time: 0.129 Seconds<BR>{Change of Use} =
        null<BR>{Existing Use} = null<BR>{Proposed Use} = null<BR>{Existing Floor
        Area} = null<BR>{New Floor Area} = null<BR>{Number of Stories} = null<BR>{Building
        Height} = null<BR>{Occupancy Classification} = null<BR>{Occupant Load} = null<BR>{Type
        of Construction} = null<BR>{Existing Fire Sprinklers?} = null<BR>{Fire Sprinklers
        Included in Project?} = null<BR>{Fire Sprinkler Type} = null<BR>{Fire Sprinkler
        Comments} = null<BR>{Existing Fire Alarm System?} = null<BR>{Fire Alarms Included
        in Project?} = null<BR>{Fire Alarm Comments} = null<BR>{Water Meter Size}
        = null<BR>{Irrigation Meter Size} = null<BR>{Backflow Device} = null<BR>{Total
        Acreage} = null<BR>{Disturbed Acreage} = null<BR>{Flood Zone} = null<BR>{Base
        Flood Elevation} = null<BR>{Not in Flood Zone} = null<BR>{Zoning 1} = null<BR>{Zoning
        2} = null<BR>{Zoning 3} = null<BR>{Land Use 1} = null<BR>{Land Use 2} = null<BR>{Land
        Use 3} = null<BR>{Parking Spaces Required} = null<BR>{Parking Spaces Provided}
        = null<BR>{Planning Case Required} = null<BR>{Required Planning Case Type}
        = null<BR>{Application Expiration Date} = null<BR>{Permit Issued Date} = null<BR>{Permit
        Expiration Date} = null<BR>{Project Description} = null<BR>{Zoning_Num} =
        null<BR>{Plan Submission} = 1<BR>{Building Review} = Y<BR>{Engineering Review}
        = Y<BR>{Fire Review} = Y<BR>{Planning Review} = Y<BR>{Citation Letter Sent}
        = null<BR>{Certify Letter Nbr} = null<BR>{Delivery Date} = null<BR>{Recipient
        Signature?} = null<BR>Executing : ApplicationSubmitAfter, Elapsed Time: 0.129
        Seconds<BR>Executing : EMSE:GlobalFlags, Elapsed Time: 0.13 Seconds<BR>Finished:
        EMSE:GlobalFlags, Elapsed Time: 0.13 Seconds<BR>Executing : ASA:Building/*/*/*,
        Elapsed Time: 0.13 Seconds<BR>Executing : EMSE:SetContactRelationshipToContactType,
        Elapsed Time: 0.13 Seconds<BR>Executing : EMSE:SetContactRelationshipToContactTypeLoop,
        Elapsed Time: 0.147 Seconds<BR>DEVELOPER : EMSE:SetContactRelationshipToContactTypeLoop
        : #02 : Criteria : true <BR>DEVELOPER : EMSE:SetContactRelationshipToContactTypeLoop
        : #02 : Action :  contactSetRelation(tContact[\"contactSeqNumber\"], tContact[\"contactType\"]);<BR>Contact
        relationship successfully changed to Applicant<BR>Finished: EMSE:SetContactRelationshipToContactTypeLoop,
        Elapsed Time: 0.185 Seconds<BR>Finished: EMSE:SetContactRelationshipToContactType,
        Elapsed Time: 0.185 Seconds<BR>DEVELOPER : ASA:Building/*/*/* : #03 : Criteria
        : matches(currentUserID,\"PUBLICUSER122\") <BR>DEVELOPER : ASA:Building/*/*/*
        : #04 : Criteria : true <BR>DEVELOPER : ASA:Building/*/*/* : #04 : Action
        :  editAppSpecific(\"Application Expiration Date\",dateAdd(fileDate,180));<BR>Finished:
        ASA:Building/*/*/*, Elapsed Time: 0.192 Seconds<BR>DEVELOPER : ApplicationSubmitAfter
        : #30 : Criteria : true <BR>DEVELOPER : ApplicationSubmitAfter : #30 : Action
        :  branch(\"ASA:\" + appTypeArray[0] + \"/\" + appTypeArray[1] + \"/*/*\");<BR>Executing
        : ASA:Building/Commercial/*/*, Elapsed Time: 0.192 Seconds<BR>Finished: ASA:Building/Commercial/*/*,
        Elapsed Time: 0.192 Seconds<BR>DEVELOPER : ApplicationSubmitAfter : #40 :
        Criteria : true <BR>DEVELOPER : ApplicationSubmitAfter : #40 : Action :  branch(\"ASA:\"
        + appTypeArray[0] + \"/*/*/\" + appTypeArray[3]);<BR>Executing : ASA:Building/*/*/NA,
        Elapsed Time: 0.192 Seconds<BR>Finished: ASA:Building/*/*/NA, Elapsed Time:
        0.192 Seconds<BR>DEVELOPER : ApplicationSubmitAfter : #50 : Criteria : true
        <BR>DEVELOPER : ApplicationSubmitAfter : #50 : Action :  branch(\"ASA:\" +
        appTypeArray[0] + \"/\" + appTypeArray[1] + \"/\" + appTypeArray[2] + \"/*\");<BR>Executing
        : ASA:Building/Commercial/Addition/*, Elapsed Time: 0.192 Seconds<BR>Finished:
        ASA:Building/Commercial/Addition/*, Elapsed Time: 0.192 Seconds<BR>DEVELOPER
        : ApplicationSubmitAfter : #60 : Criteria : true <BR>DEVELOPER : ApplicationSubmitAfter
        : #60 : Action :  branch(\"ASA:\" + appTypeArray[0] + \"/\" + appTypeArray[1]
        + \"/*/\" + appTypeArray[3]);<BR>Executing : ASA:Building/Commercial/*/NA,
        Elapsed Time: 0.192 Seconds<BR>Finished: ASA:Building/Commercial/*/NA, Elapsed
        Time: 0.192 Seconds<BR>DEVELOPER : ApplicationSubmitAfter : #70 : Criteria
        : true <BR>DEVELOPER : ApplicationSubmitAfter : #70 : Action :  branch(\"ASA:\"
        + appTypeString);<BR>Executing : ASA:Building/Commercial/Addition/NA, Elapsed
        Time: 0.192 Seconds<BR>Finished: ASA:Building/Commercial/Addition/NA, Elapsed
        Time: 0.192 Seconds<BR>DEVELOPER : ApplicationSubmitAfter : #75 : Criteria
        : true <BR>DEVELOPER : ApplicationSubmitAfter : #75 : Action :  showDebug=3;
        logDebug(\"currentUserID: \" + currentUserID);<BR>currentUserID: DEVELOPER<BR>Finished:
        ApplicationSubmitAfter, Elapsed Time: 0.192 Seconds<BR>","result":{"id":"NULLISLAND-REC25-00000-00057","type":{"module":"Building","value":"Building/Commercial/Addition/NA","type":"Commercial","text":"Commercial
        Addition","group":"Building","alias":"Commercial Addition","subType":"Addition","category":"NA","id":"Building-Commercial-Addition-NA"},"module":"Building","status":{"value":"Submitted","text":"Submitted"},"recordClass":"COMPLETE","initiatedProduct":"AV360","serviceProviderCode":"NULLISLAND","createdBy":"DEVELOPER","statusDate":"2025-06-12
        15:43:34","customId":"BLD25-00136","jobValue":0.0,"renewalInfo":{"expirationDate":"2025-01-31
        00:00:00","expirationStatus":"Pending"},"openedDate":"2025-06-12 00:00:00","trackingId":221897856,"value":"REC25-00000-00057","totalFee":0.0,"totalPay":0.0,"balance":40.0,"booking":false,"infraction":false,"misdemeanor":false,"offenseWitnessed":false,"defendantSignature":false,"publicOwned":false},"status":200}'
  recorded_at: Thu, 12 Jun 2025 22:43:36 GMT
- request:
    method: get
    uri: https://apis.accela.com/v4/records/NULLISLAND-REC25-00000-00057/contacts
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Content-Type:
      - application/json
      Accept:
      - application/json
      X-Accela-Appid:
      - '638853549908464776'
      Authorization:
      - AisMLrUTDT8JtWeaaoLzZbLWmMUDYkF9cD86t_IYzaQmxSJ3cobf3r1GmvhT24nZ6OzPsLFVLZgPw5won1b4ac1Auk6VGiJcpYkEJ-IyvNdqTszuISBHsmKkIzr9hQZ_kNSV5cDDQZFEN1LZAFouAgCRQ_GK0FkTyi5OSx-07owgp4FoTM7agCfGvVmMFOOuDOOMjL4AW_Sj6YmJnknt4x8bu_nKyBmfQpoJjerMsHN8hqkuWZ5Pa2_0jjrV4-44lIrxBrJggHA9-KDbnv4Tz7p0Mb99nbNJKGE4ooED_C0ZmR31ToOFYSYO6-apbZtowSiY3WmSfgTbaWMIPODRJJt99uW0VpittVTf2k6XrHkzsWU-yEkt6o0XZSgKhDi5InIEaedGO3SKH6WD71iPm3fbrMtfOnB9FSpdxOINwBsatKRRXzIVXrHBegKTVNXvH1EMrAwBUEsylWfpdIVbBGxIC3vM4mA0MzO8VVvbfAlqaQHsctRa_F2te3l7pLuSwM5HdM0xeOAmmSt8N7ZsMEBGuGBomfe6Uu1J-2OWBt-ebgElBBzrExPnED4govkYcyQUQP_5A-gHTaWXeV0t624Xp-2NM6aQULAe5Exexg01
      X-Accela-Agency:
      - nullisland
      User-Agent:
      - Faraday v2.13.1
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 12 Jun 2025 22:43:36 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Vary:
      - Accept-Encoding
      X-Powered-By:
      - Undertow/1
      X-Accela-Traceid:
      - 250612224336389-8e8e917e
      X-Azure-Ref:
      - 20250612T224336Z-156d548487bq7dv5hC1BOS912c000000017g000000002hus
      X-Cache:
      - CONFIG_NOCACHE
    body:
      encoding: ASCII-8BIT
      string: '{"result":[{"startDate":"2025-06-12 15:43:35","id":"274380246","isPrimary":"Y","recordId":{"id":"NULLISLAND-REC25-00000-00057","missingIdentifier":false,"trackingId":0,"serviceProviderCode":"NULLISLAND","value":"REC25-00000-00057"},"status":{"value":"A","text":"Active"},"type":{"value":"Applicant","text":"Applicant"},"relation":{"value":"Applicant","text":"Applicant"},"address":{}}],"status":200}'
  recorded_at: Thu, 12 Jun 2025 22:43:36 GMT
recorded_with: VCR 6.3.1
